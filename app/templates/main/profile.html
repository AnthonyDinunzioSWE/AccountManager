{% extends "base.html" %}

{% block title %}Profile | PasswordVault{% endblock %}

{% block content %}

<h1>Good {{ timeset }}, {{ current_user.email }}</h1>

<div class="max-w-md mx-auto mt-16 bg-gray-800 p-8 rounded-lg shadow-lg animate-fade-in">
  <h2 class="text-3xl font-bold text-white mb-6 text-center">Your Profile</h2>

  <form action="{{ url_for('main_bp.update_profile') }}" method="POST" id="profile-form" class="space-y-6">
    <div>
      <label for="email" class="block text-sm font-medium mb-1">Email</label>
      <input type="email" id="email" name="email" value="{{ current_user.email }}" required
        class="w-full px-4 py-2 rounded bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:bg-gray-900" />
    </div>

    <button type="submit"
      class="w-full bg-primary hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded transition transform hover:-translate-y-1">
      Update Profile
    </button>
  </form>

  <p class="mt-6 text-sm text-center text-gray-400">
    Want to change your password?
    <a href="{{ url_for('auth_bp.change_password') }}" class="text-primary hover:underline">Change Password</a>
  </p>
  <p class="mt-2 text-sm text-center text-gray-400">
    Need to delete your account?
    <a href="{{ url_for('auth_bp.delete_account') }}" class="text-primary hover:underline">Delete Account</a>
  </p>

  <table>

    <thead>
      <tr>
        <th class="text-left">Type</th>
        <th class="text-left">Value Hash</th>
        <th class="text-left">Actions</th>
      </tr>

    </thead>

    <tbody>
      {% for saved_pass in saved_passwords %}
      <tr class="bg-gray-700 hover:bg-gray-600 transition">
        <td>{{ saved_pass.type }}</td>
        <td>{{ saved_pass.value_hash }}</td>
        <td>
          <a href="{{ url_for('main_bp.unhash_password', id=saved_pass.id) }}" class="text-primary hover:underline">Unhash</a>
          <a href="{{ url_for('main_bp.delete_password', id=saved_pass.id) }}" class="text-red-500 hover:underline">Delete</a>
        </td>
      </tr>
      {% endfor %}

  </table>

    <p class="mt-6 text-sm text-center text-gray-400">
        Want to add a new password?
        <a href="{{ url_for('main_bp.generate_password') }}" class="text-primary hover:underline">Add Password</a>
    </p>

{% endblock %}